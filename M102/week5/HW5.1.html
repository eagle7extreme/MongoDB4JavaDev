<html><head><title>Untitled document</title><style type="text/css">ol{margin:0;padding:0}.c9{color:#1d4595;font-size:12pt;background-color:#ffffff;font-family:"Verdana"}.c0{color:#3c3c3c;font-size:12pt;background-color:#ffffff;font-family:"Verdana"}.c4{color:#646464;font-size:22pt;background-color:#ffffff;font-family:"Verdana"}.c12{color:#222222;font-size:12pt;background-color:#ffffff;font-family:"Verdana"}.c1{color:#3c3c3c;background-color:#f8f8f8;font-family:"Verdana"}.c15{max-width:468pt;background-color:#ffffff;padding:72pt 72pt 72pt 72pt}.c13{color:#aaaaaa;background-color:#f7f7f7;font-family:"Verdana"}.c11{color:#116644;background-color:#ffffff;font-family:"Verdana"}.c8{line-height:1.2;direction:ltr;padding-bottom:11pt}.c3{line-height:1.6000000000000003;direction:ltr;padding-bottom:17pt}.c6{color:#222222;background-color:#f8f8f8;font-family:"Verdana"}.c7{line-height:1.4;direction:ltr}.c5{color:inherit;text-decoration:inherit}.c2{line-height:1.0;direction:ltr}.c18{text-align:right;padding-bottom:8pt}.c10{margin-left:22pt;padding-bottom:8pt}.c14{height:11pt;direction:ltr}.c17{font-style:italic}.c16{padding-top:15pt}.title{padding-top:0pt;line-height:1.15;text-align:left;color:#000000;font-size:21pt;font-family:"Trebuchet MS";padding-bottom:0pt}.subtitle{padding-top:0pt;line-height:1.15;text-align:left;color:#666666;font-style:italic;font-size:13pt;font-family:"Trebuchet MS";padding-bottom:10pt}li{color:#000000;font-size:11pt;font-family:"Arial"}p{color:#000000;font-size:11pt;margin:0;font-family:"Arial"}h1{padding-top:10pt;line-height:1.15;text-align:left;color:#000000;font-size:16pt;font-family:"Trebuchet MS";padding-bottom:0pt}h2{padding-top:10pt;line-height:1.15;text-align:left;color:#000000;font-size:13pt;font-family:"Trebuchet MS";font-weight:bold;padding-bottom:0pt}h3{padding-top:8pt;line-height:1.15;text-align:left;color:#666666;font-size:12pt;font-family:"Trebuchet MS";font-weight:bold;padding-bottom:0pt}h4{padding-top:8pt;line-height:1.15;text-align:left;color:#666666;font-size:11pt;text-decoration:underline;font-family:"Trebuchet MS";padding-bottom:0pt}h5{padding-top:8pt;line-height:1.15;text-align:left;color:#666666;font-size:11pt;font-family:"Trebuchet MS";padding-bottom:0pt}h6{padding-top:8pt;line-height:1.15;text-align:left;color:#666666;font-style:italic;font-size:11pt;font-family:"Trebuchet MS";padding-bottom:0pt}</style></head><body class="c15"><h2 class="c8"><span class="c4">Homework: Homework 5.1</span></h2><p class="c3"><span class="c0">Start a </span><span class="c1">mongod</span><span class="c0">&nbsp;server instance (if you still have your replica set from week 4 running, that would work too).</span></p><p class="c2"><span class="c12">Next, download </span><span class="c9"><a class="c5" href="https://education.10gen.com/static/m102-july-2013/handouts/week5.60d456f75d43.js">week5.js</a></span><span class="c12">&nbsp;and run:</span></p><p class="c7"><span class="c6">mongo --shell localhost/week5 week5.js<br>&gt; homework.init()<br>&gt;<br></span></p><p class="c3"><span class="c0">Assume our app development team for a project would like to speed up the following query:</span></p><p class="c7"><span class="c6">db.sensor_readings.find( { <br> &nbsp;tstamp : { <br> &nbsp; &nbsp;$gte : ISODate(&quot;2012-08-01&quot;), <br> &nbsp; &nbsp;$lte : &nbsp;ISODate(&quot;2012-09-01&quot;) <br> &nbsp;},<br> &nbsp;active : true<br>} ).limit(3)<br></span></p><p class="c3"><span class="c0">Run the query, and explain(). Then create an index to speed up the query (with ensureIndex()). Then run the explain() again and see that things have improved. When you have a solution run:</span></p><p class="c7"><span class="c6">homework.a()<br></span></p><p class="c3"><span class="c0">and enter the result below.</span></p><p class="c3 c16"><span class="c0">Note: if you would like to try different indexes, you can use</span><span class="c1">db.sensor_readings.dropIndexes()</span><span class="c0">&nbsp;to drop your old index before creating a new one. (For this problem you will only need one index beyond the _id index which is present by default.)</span></p><p class="c3 c16"><span class="c0">Note: we are optimizing for the query </span><span class="c0 c17">when the limit clause is present</span><span class="c0">. So be use to include limit when you call explain.</span></p><p class="c7 c18"><span class="c13">1</span></p><p class="c7 c10"><span class="c11">6</span></p><p class="c14"><span></span></p></body></html>