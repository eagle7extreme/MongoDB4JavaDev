<html><head><title>Untitled document</title><style type="text/css">ol{margin:0;padding:0}.c7{color:#222222;font-size:12pt;background-color:#ffffff;font-family:"Verdana"}.c3{color:#3c3c3c;font-size:12pt;background-color:#ffffff;font-family:"Verdana"}.c1{line-height:1.6000000000000003;padding-top:15pt;direction:ltr;padding-bottom:17pt}.c5{color:#646464;font-size:90pt;background-color:#ffffff;font-family:"Verdana"}.c10{line-height:1.6000000000000003;direction:ltr;padding-bottom:8pt}.c0{color:#222222;background-color:#f8f8f8;font-family:"Verdana"}.c8{line-height:1.2;direction:ltr;padding-bottom:11pt}.c13{max-width:468pt;background-color:#ffffff;padding:72pt 72pt 72pt 72pt}.c4{line-height:1.6000000000000003;direction:ltr;padding-bottom:17pt}.c2{line-height:1.375;direction:ltr}.c6{line-height:1.4;direction:ltr}.c9{height:11pt;direction:ltr}.c12{font-style:italic}.c11{height:11pt}.title{padding-top:0pt;line-height:1.15;text-align:left;color:#000000;font-size:21pt;font-family:"Trebuchet MS";padding-bottom:0pt}.subtitle{padding-top:0pt;line-height:1.15;text-align:left;color:#666666;font-style:italic;font-size:13pt;font-family:"Trebuchet MS";padding-bottom:10pt}li{color:#000000;font-size:11pt;font-family:"Arial"}p{color:#000000;font-size:11pt;margin:0;font-family:"Arial"}h1{padding-top:10pt;line-height:1.15;text-align:left;color:#000000;font-size:16pt;font-family:"Trebuchet MS";padding-bottom:0pt}h2{padding-top:10pt;line-height:1.15;text-align:left;color:#000000;font-size:13pt;font-family:"Trebuchet MS";font-weight:bold;padding-bottom:0pt}h3{padding-top:8pt;line-height:1.15;text-align:left;color:#666666;font-size:12pt;font-family:"Trebuchet MS";font-weight:bold;padding-bottom:0pt}h4{padding-top:8pt;line-height:1.15;text-align:left;color:#666666;font-size:11pt;text-decoration:underline;font-family:"Trebuchet MS";padding-bottom:0pt}h5{padding-top:8pt;line-height:1.15;text-align:left;color:#666666;font-size:11pt;font-family:"Trebuchet MS";padding-bottom:0pt}h6{padding-top:8pt;line-height:1.15;text-align:left;color:#666666;font-style:italic;font-size:11pt;font-family:"Trebuchet MS";padding-bottom:0pt}</style></head><body class="c13"><h2 class="c8"><span class="c5">Homework: Homework 4.5</span></h2><p class="c4"><span class="c3">Note our replica set now only has an even number of members, and that is not a best practice. However, to keep the homework from getting too long we&rsquo;ll leave it at that for now, and instead do one more exercise below involving the </span><span class="c3 c12">oplog</span><span class="c3">.</span></p><p class="c1"><span class="c3">Go to the secondary in the replica set. Run this to verify you are on the secondary:</span></p><p class="c6"><span class="c0">&gt; // expect to get back false as we are not primary<br>&gt; db.isMaster().ismaster<br>false<br></span></p><p class="c2"><span class="c7">Switch to the local database and then look at the oplog:</span></p><p class="c6"><span class="c0">&gt; db.oplog.rs.find()<br></span></p><p class="c4"><span class="c3">If you get a blank result, you are not on the right database.</span></p><p class="c1"><span class="c3">Note: as the local database doesn&rsquo;t replicate, it will let you query it without entering &ldquo;rs.slaveOk()&rdquo; first.</span></p><p class="c1"><span class="c3">Note: you may wonder why the number of lines in the oplog is the number you see here. See the homework answer video when answers are posted for more information if curious.</span></p><p class="c1"><span class="c3">Next look at the stats on the oplog to get a feel for its size:</span></p><p class="c6"><span class="c0">&gt; db.oplog.rs.stats()<br></span></p><p class="c2"><span class="c7">What result does this expression give when evaluated?</span></p><p class="c6"><span class="c0">db.oplog.rs.find().sort({$natural:1}).limit(1).next().o.msg[0]<br></span></p><p class="c10 c11"><span class="c3"></span></p><p class="c10"><span class="c3">Ans: R</span></p><p class="c9"><span></span></p><p class="c9"><span></span></p></body></html>