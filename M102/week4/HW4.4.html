<html><head><title>Untitled document</title><style type="text/css">ol{margin:0;padding:0}.c1{color:#222222;font-size:12pt;background-color:#ffffff;font-family:"Verdana"}.c11{color:#646464;font-size:68pt;background-color:#ffffff;font-family:"Verdana"}.c0{line-height:1.6000000000000003;direction:ltr;padding-bottom:8pt}.c2{color:#116644;background-color:#ffffff;font-family:"Verdana"}.c3{line-height:1.2;direction:ltr;padding-bottom:11pt}.c8{color:#222222;background-color:#f8f8f8;font-family:"Verdana"}.c4{color:#aaaaaa;background-color:#f7f7f7;font-family:"Verdana"}.c7{max-width:468pt;background-color:#ffffff;padding:72pt 72pt 72pt 72pt}.c10{text-align:right;padding-bottom:8pt}.c12{margin-left:22pt;padding-bottom:8pt}.c5{height:11pt;direction:ltr}.c9{line-height:1.4;direction:ltr}.c6{line-height:1.375;direction:ltr}.title{padding-top:0pt;line-height:1.15;text-align:left;color:#000000;font-size:21pt;font-family:"Trebuchet MS";padding-bottom:0pt}.subtitle{padding-top:0pt;line-height:1.15;text-align:left;color:#666666;font-style:italic;font-size:13pt;font-family:"Trebuchet MS";padding-bottom:10pt}li{color:#000000;font-size:11pt;font-family:"Arial"}p{color:#000000;font-size:11pt;margin:0;font-family:"Arial"}h1{padding-top:10pt;line-height:1.15;text-align:left;color:#000000;font-size:16pt;font-family:"Trebuchet MS";padding-bottom:0pt}h2{padding-top:10pt;line-height:1.15;text-align:left;color:#000000;font-size:13pt;font-family:"Trebuchet MS";font-weight:bold;padding-bottom:0pt}h3{padding-top:8pt;line-height:1.15;text-align:left;color:#666666;font-size:12pt;font-family:"Trebuchet MS";font-weight:bold;padding-bottom:0pt}h4{padding-top:8pt;line-height:1.15;text-align:left;color:#666666;font-size:11pt;text-decoration:underline;font-family:"Trebuchet MS";padding-bottom:0pt}h5{padding-top:8pt;line-height:1.15;text-align:left;color:#666666;font-size:11pt;font-family:"Trebuchet MS";padding-bottom:0pt}h6{padding-top:8pt;line-height:1.15;text-align:left;color:#666666;font-style:italic;font-size:11pt;font-family:"Trebuchet MS";padding-bottom:0pt}</style></head><body class="c7"><h2 class="c3"><span class="c11">Homework: Homework 4.4</span></h2><p class="c6"><span class="c1">We will now retire the first member (@ port 27001) from the set (remove it that is). </span></p><p class="c6"><span class="c1">As a first step to doing this we will shut it down. (Given the rest of the set can maintain a majority, we can still do a majority reconfiguration if it is down.) </span></p><p class="c6"><span class="c1">We could simply terminate its mongod process, but if we use the replSetStepDown command, the failover may be faster. So that is a good practice albeit not essential. Connect to member 1 (port 27001) in the shell and run:</span></p><p class="c9"><span class="c8">&gt; rs.help()<br>&gt; rs.stepDown(300)<br></span></p><p class="c6"><span class="c1">Then cleanly terminate the mongod process for member 1. </span></p><p class="c6"><span class="c1">Next, go to the new primary of the set. Run rs.status() to check that things are as you expect. Then, reconfigure to remove member 1. Tip: if new to javascript you may find the Array.shift() method helpful for example try this in the shell:</span></p><p class="c9"><span class="c8">&gt; my_array = [&lsquo;a&rsquo;,&rsquo;b&rsquo;,&rsquo;c&rsquo;]<br>&gt; my_array.shift()<br>&gt; my_array<br>&gt;<br></span></p><p class="c6"><span class="c1">When done, run</span></p><p class="c9"><span class="c8">&gt; homework.d()<br></span></p><p class="c0"><span class="c1">and enter the result. (If you ran the shell without week4.js on the command line, run it again with that.)</span></p><p class="c9 c10"><span class="c4">1</span></p><p class="c9 c12"><span class="c2">6</span></p><p class="c5"><span></span></p><p class="c5"><span></span></p></body></html>