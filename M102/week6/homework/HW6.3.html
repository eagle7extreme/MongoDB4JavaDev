<html><head><title>Untitled document</title><meta content="text/html; charset=UTF-8" http-equiv="content-type"><style type="text/css">ol{margin:0;padding:0}.c2{line-height:1.4;height:11pt;text-align:right;direction:ltr;margin-left:22pt;padding-bottom:8pt}.c5{color:#222222;font-size:12pt;background-color:#ffffff;font-family:"Verdana"}.c3{color:#646464;font-size:20pt;background-color:#ffffff;font-family:"Verdana"}.c4{line-height:1.375;direction:ltr;margin-left:22pt;padding-bottom:8pt}.c11{line-height:1.4;direction:ltr;margin-left:22pt;padding-bottom:8pt}.c0{color:#3c3c3c;font-size:12pt;background-color:#ffffff;font-family:"Verdana"}.c8{max-width:468pt;background-color:#ffffff;padding:72pt 72pt 72pt 72pt}.c1{line-height:1.6000000000000003;direction:ltr;padding-bottom:17pt}.c12{color:#aaaaaa;background-color:#f7f7f7;font-family:"Verdana"}.c6{color:#116644;background-color:#ffffff;font-family:"Verdana"}.c10{line-height:1.2;direction:ltr;padding-bottom:11pt}.c7{color:#222222;background-color:#f8f8f8;font-family:"Verdana"}.c13{height:11pt;direction:ltr}.c9{padding-top:15pt}.title{padding-top:0pt;line-height:1.15;text-align:left;color:#000000;font-size:21pt;font-family:"Trebuchet MS";padding-bottom:0pt}.subtitle{padding-top:0pt;line-height:1.15;text-align:left;color:#666666;font-style:italic;font-size:13pt;font-family:"Trebuchet MS";padding-bottom:10pt}li{color:#000000;font-size:11pt;font-family:"Arial"}p{color:#000000;font-size:11pt;margin:0;font-family:"Arial"}h1{padding-top:10pt;line-height:1.15;text-align:left;color:#000000;font-size:16pt;font-family:"Trebuchet MS";padding-bottom:0pt}h2{padding-top:10pt;line-height:1.15;text-align:left;color:#000000;font-size:13pt;font-family:"Trebuchet MS";font-weight:bold;padding-bottom:0pt}h3{padding-top:8pt;line-height:1.15;text-align:left;color:#666666;font-size:12pt;font-family:"Trebuchet MS";font-weight:bold;padding-bottom:0pt}h4{padding-top:8pt;line-height:1.15;text-align:left;color:#666666;font-size:11pt;text-decoration:underline;font-family:"Trebuchet MS";padding-bottom:0pt}h5{padding-top:8pt;line-height:1.15;text-align:left;color:#666666;font-size:11pt;font-family:"Trebuchet MS";padding-bottom:0pt}h6{padding-top:8pt;line-height:1.15;text-align:left;color:#666666;font-style:italic;font-size:11pt;font-family:"Trebuchet MS";padding-bottom:0pt}</style></head><body class="c8"><h2 class="c10"><a name="h.qv97165dp1gq"></a><span class="c3">Homework: Homework 6.3</span></h2><p class="c1"><span class="c0">Let&#39;s now add a new shard. Run another mongod as the new shard on a new port number. Use --shardsvr.</span></p><p class="c1 c9"><span class="c0">Then add the shard to the cluster (see sh.help()).</span></p><p class="c1 c9"><span class="c0">You can confirm the above worked by running:</span></p><p class="c11"><span class="c7">homework.check1()</span></p><p class="c4"><span class="c5">Now wait for the balancer to move data among the two shards more evenly. Periodically run:</span></p><p class="c11"><span class="c7">&gt; use config<br>&gt; db.chunks.find( { ns:&quot;week6.trades&quot; }, {min:1,max:1,shard:1,_id:0} ).sort({min:1})<br></span></p><p class="c4"><span class="c5">and/or:</span></p><p class="c11"><span class="c7">db.chunks.aggregate( [<br> { $match : { ns : &quot;week6.trades&quot; } } , <br> { $group : { _id : &quot;$shard&quot;, n : { $sum : 1 } } }<br>] )<br></span></p><p class="c4"><span class="c5">When done, run homework.c() and enter the result value.</span></p><p class="c1"><span class="c0">That completes this week&#39;s homework. However if you want to explore more, something to try would be to try some queries and/or write operations with a single process down to see how the system behaves in such a situation.</span></p><p class="c2"><span class="c12"></span></p><p class="c11"><span class="c6">2</span></p><p class="c13"><span></span></p></body></html>