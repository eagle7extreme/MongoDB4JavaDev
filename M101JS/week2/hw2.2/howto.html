<html><head><title>Untitled document</title><style type="text/css">ol{margin:0;padding:0}.c5{line-height:1.4;text-align:right;direction:ltr;padding-bottom:8pt}.c8{line-height:1.4;direction:ltr;margin-left:22pt;padding-bottom:8pt}.c6{max-width:468pt;background-color:#ffffff;padding:72pt 72pt 72pt 72pt}.c0{line-height:1.6000000000000003;direction:ltr;padding-bottom:17pt}.c7{color:#aaaaaa;background-color:#f7f7f7;font-family:"Verdana"}.c3{color:#222222;background-color:#f8f8f8;font-family:"Verdana"}.c4{line-height:1.2;direction:ltr;padding-bottom:11pt}.c2{color:#3c3c3c;font-size:12pt}.c12{color:#646464;font-size:20pt}.c10{height:11pt;direction:ltr}.c1{background-color:#ffffff;font-family:"Verdana"}.c9{line-height:1.4;direction:ltr}.c11{height:11pt}.title{padding-top:0pt;line-height:1.15;text-align:left;color:#000000;font-size:21pt;font-family:"Trebuchet MS";padding-bottom:0pt}.subtitle{padding-top:0pt;line-height:1.15;text-align:left;color:#666666;font-style:italic;font-size:13pt;font-family:"Trebuchet MS";padding-bottom:10pt}li{color:#000000;font-size:11pt;font-family:"Arial"}p{color:#000000;font-size:11pt;margin:0;font-family:"Arial"}h1{padding-top:10pt;line-height:1.15;text-align:left;color:#000000;font-size:16pt;font-family:"Trebuchet MS";padding-bottom:0pt}h2{padding-top:10pt;line-height:1.15;text-align:left;color:#000000;font-size:13pt;font-family:"Trebuchet MS";font-weight:bold;padding-bottom:0pt}h3{padding-top:8pt;line-height:1.15;text-align:left;color:#666666;font-size:12pt;font-family:"Trebuchet MS";font-weight:bold;padding-bottom:0pt}h4{padding-top:8pt;line-height:1.15;text-align:left;color:#666666;font-size:11pt;text-decoration:underline;font-family:"Trebuchet MS";padding-bottom:0pt}h5{padding-top:8pt;line-height:1.15;text-align:left;color:#666666;font-size:11pt;font-family:"Trebuchet MS";padding-bottom:0pt}h6{padding-top:8pt;line-height:1.15;text-align:left;color:#666666;font-style:italic;font-size:11pt;font-family:"Trebuchet MS";padding-bottom:0pt}</style></head><body class="c6"><h2 class="c4"><span class="c1 c12">Homework: Homework 2.2</span></h2><p class="c0"><span class="c1 c2">Write a program that finds the document with the highest recorded temperature for each state, and adds a &quot;month_high&quot; field for that document, setting its value to true. Use the weather dataset that you imported in HW 2.1. </span></p><p class="c0 c11"><span class="c2 c1"></span></p><p class="c0"><span class="c2 c1">This is a sample document from the weather data collection:</span></p><p class="c9"><span class="c3">&gt; use weather<br>switched to db weather<br>&gt; db.data.findOne()<br>{<br> &nbsp; &nbsp;&quot;_id&quot; : ObjectId(&quot;520bea012ab230549e749cff&quot;),<br> &nbsp; &nbsp;&quot;Day&quot; : 1,<br> &nbsp; &nbsp;&quot;Time&quot; : 54,<br> &nbsp; &nbsp;&quot;State&quot; : &quot;Vermont&quot;,<br> &nbsp; &nbsp;&quot;Airport&quot; : &quot;BTV&quot;,<br> &nbsp; &nbsp;&quot;Temperature&quot; : 39,<br> &nbsp; &nbsp;&quot;Humidity&quot; : 57,<br> &nbsp; &nbsp;&quot;Wind Speed&quot; : 6,<br> &nbsp; &nbsp;&quot;Wind Direction&quot; : 170,<br> &nbsp; &nbsp;&quot;Station Pressure&quot; : 29.6,<br> &nbsp; &nbsp;&quot;Sea Level Pressure&quot; : 150<br>}<br></span></p><p class="c0"><span class="c2 c1">Assuming this document has the highest &quot;Temperature&quot; for the &quot;State&quot; of &quot;Vermont&quot; in our collection, the document should look like this after you run your program:</span></p><p class="c9"><span class="c3">db.data.findOne({ &quot;_id&quot; : ObjectId(&quot;520bea012ab230549e749cff&quot;) })<br>{<br> &nbsp; &nbsp;&quot;_id&quot; : ObjectId(&quot;520bea012ab230549e749cff&quot;),<br> &nbsp; &nbsp;&quot;Day&quot; : 1,<br> &nbsp; &nbsp;&quot;Time&quot; : 54,<br> &nbsp; &nbsp;&quot;State&quot; : &quot;Vermont&quot;,<br> &nbsp; &nbsp;&quot;Airport&quot; : &quot;BTV&quot;,<br> &nbsp; &nbsp;&quot;Temperature&quot; : 39,<br> &nbsp; &nbsp;&quot;Humidity&quot; : 57,<br> &nbsp; &nbsp;&quot;Wind Speed&quot; : 6,<br> &nbsp; &nbsp;&quot;Wind Direction&quot; : 170,<br> &nbsp; &nbsp;&quot;Station Pressure&quot; : 29.6,<br> &nbsp; &nbsp;&quot;Sea Level Pressure&quot; : 150,<br> &nbsp; &nbsp;&quot;month_high&quot; : true<br>}<br></span></p><p class="c0"><span class="c2 c1">Note that this is only an example and not the actual document that you would be updating. Note also that our collection only has one month of data for each &quot;State&quot;, which is why we are asking you to set &quot;month_high&quot;.</span></p><p class="c0 c11"><span class="c2 c1"></span></p><p class="c0"><span class="c2 c1">Hint: If you select all the weather documents, you can sort first by state, then by temperature. Then you can iterate through the documents and know that whenever the state changes you have reached the highest temperature for that state. </span></p><p class="c0 c11"><span class="c2 c1"></span></p><p class="c0"><span class="c2 c1">Once you&#39;ve done this, you can validate it using the validation script we&#39;ve provided in the &#39;validate&#39; directory. Just run the following commands:</span></p><p class="c9"><span class="c3">cd validate<br>npm install<br>node validate.js<br></span></p><p class="c0"><span class="c2 c1">If you got it right, it will provide a validation code for you to enter into the box below. Enter just the code, no spaces. If you fail validation or have messed up your collection beyond repair, run the following to drop the weather database so you can reimport the data and try again:</span></p><p class="c9"><span class="c3">mongo weather --eval &quot;printjson(db.dropDatabase())&quot;<br></span></p><p class="c5"><span class="c7">1</span></p><p class="c8"><span class="c1">WSRMOzQ4KTKhFEC6rUDn</span></p><p class="c10"><span class="c12 c1"></span></p></body></html>