<html><head><title>Untitled document</title><style type="text/css">ol{margin:0;padding:0}.c0{color:#222222;font-size:12pt;background-color:#ffffff;font-family:"Verdana"}.c4{line-height:1.4;direction:ltr;margin-left:22pt;padding-bottom:8pt}.c14{color:#646464;font-size:20pt;background-color:#ffffff;font-family:"Verdana"}.c3{color:#3c3c3c;font-size:12pt;background-color:#ffffff;font-family:"Verdana"}.c6{line-height:1.6000000000000003;direction:ltr;padding-bottom:17pt}.c5{line-height:1.2;direction:ltr;padding-bottom:11pt}.c11{max-width:468pt;background-color:#ffffff;padding:72pt 72pt 72pt 72pt}.c8{color:#222222;background-color:#f8f8f8;font-family:"Verdana"}.c2{color:#aaaaaa;background-color:#f7f7f7;font-family:"Verdana"}.c13{text-align:right;padding-bottom:8pt}.c15{background-color:#ffffff;font-family:"Verdana"}.c1{line-height:1.375;direction:ltr}.c12{line-height:1.6000000000000003;padding-bottom:8pt}.c9{line-height:1.4;direction:ltr}.c10{direction:ltr}.c7{height:11pt}.title{padding-top:0pt;line-height:1.15;text-align:left;color:#000000;font-size:21pt;font-family:"Trebuchet MS";padding-bottom:0pt}.subtitle{padding-top:0pt;line-height:1.15;text-align:left;color:#666666;font-style:italic;font-size:13pt;font-family:"Trebuchet MS";padding-bottom:10pt}li{color:#000000;font-size:11pt;font-family:"Arial"}p{color:#000000;font-size:11pt;margin:0;font-family:"Arial"}h1{padding-top:10pt;line-height:1.15;text-align:left;color:#000000;font-size:16pt;font-family:"Trebuchet MS";padding-bottom:0pt}h2{padding-top:10pt;line-height:1.15;text-align:left;color:#000000;font-size:13pt;font-family:"Trebuchet MS";font-weight:bold;padding-bottom:0pt}h3{padding-top:8pt;line-height:1.15;text-align:left;color:#666666;font-size:12pt;font-family:"Trebuchet MS";font-weight:bold;padding-bottom:0pt}h4{padding-top:8pt;line-height:1.15;text-align:left;color:#666666;font-size:11pt;text-decoration:underline;font-family:"Trebuchet MS";padding-bottom:0pt}h5{padding-top:8pt;line-height:1.15;text-align:left;color:#666666;font-size:11pt;font-family:"Trebuchet MS";padding-bottom:0pt}h6{padding-top:8pt;line-height:1.15;text-align:left;color:#666666;font-style:italic;font-size:11pt;font-family:"Trebuchet MS";padding-bottom:0pt}</style></head><body class="c11"><h2 class="c5"><span class="c14">Homework: Homework 2.3</span></h2><p class="c6"><span class="c3">Blog User Sign-up and Login </span></p><p class="c6 c7"><span class="c3"></span></p><p class="c6"><span class="c3">If you have not already done so download the homework files for this week.</span></p><p class="c6 c7"><span class="c3"></span></p><p class="c6"><span class="c3">You should see four files at the highest level: app.js, users.js, posts.js and sessions.js. There is also a views directory which contains the templates for the project and a routes directory which contains our express routes.</span></p><p class="c6 c7"><span class="c3"></span></p><p class="c6"><span class="c3">If everything is working properly, you should be able to start the blog by typing:</span></p><p class="c9"><span class="c8">npm install<br>node app.js<br></span></p><p class="c1"><span class="c0">Note that this requires Node.js to be correctly installed on your computer. After you run the blog, you should see the message:</span></p><p class="c9"><span class="c8">Express server listening on port 3000<br></span></p><p class="c1"><span class="c0">If you goto http://localhost:3000 you should see the front page of the blog. Here are some URLs that must work when you are done.</span></p><p class="c1 c7"><span class="c0"></span></p><p class="c1"><span class="c0">http://localhost:3000/signup</span></p><p class="c1"><span class="c0">http://localhost:3000/login</span></p><p class="c1"><span class="c0">http://localhost:3000/logout</span></p><p class="c1 c7"><span class="c0"></span></p><p class="c1"><span class="c0">When you login or sign-up, the blog will redirect to http://localhost:3000/welcome and that must work properly, welcoming the user by username.</span></p><p class="c1 c7"><span class="c0"></span></p><p class="c1"><span class="c0">We have removed parts of the code that uses the Node.js driver to query MongoDB from users.js and marked the area where you need to work with &quot;TODO: hw2.3&quot;. You should not need to touch any other code. The database calls that you are going to add will add a new user upon sign-up and validate a login by retrieving the right user document.</span></p><p class="c1 c7"><span class="c0"></span></p><p class="c1"><span class="c0">The blog stores its data in the blog database in two collections, users and sessions. Here are two example docs for a username &lsquo;sverch&rsquo; with password &lsquo;salty&rsquo;. You can insert these if you like, but you don&rsquo;t need to.</span></p><p class="c9"><span class="c8">&gt; use blog<br>switched to db blog<br>&gt; db.users.find()<br>{ &quot;_id&quot; : &quot;sverch&quot;, &quot;password&quot; : &quot;$2a$10$wl4bNB/5CqwWx4bB66PoQ.lmYvxUHigM1ehljyWQBupen3uCcldoW&quot; }<br>&gt; db.sessions.find()<br>{ &quot;username&quot; : &quot;sverch&quot;, &quot;_id&quot; : &quot;8d25917b27e4dc170d32491c6247aabba7598533&quot; }<br>&gt;<br></span></p><p class="c1"><span class="c0">Once you have the the project working, the following steps should work:</span></p><p class="c9"><span class="c8">&nbsp; &nbsp;go to http://localhost:3000/signup<br> &nbsp; &nbsp;create a user<br></span></p><p class="c1"><span class="c0">It should redirect you to the welcome page and say: welcome username, where username is the user you signed up with. Now:</span></p><p class="c9"><span class="c8">&nbsp; &nbsp;Goto http://localhost:3000/logout<br> &nbsp; &nbsp;Now login http://localhost:3000/login<br></span></p><p class="c1"><span class="c0">Ok, now it&rsquo;s time to validate you got it all working.</span></p><p class="c1 c7"><span class="c0"></span></p><p class="c1"><span class="c0">You can validate the blog using the validation script we&#39;ve provided in the &#39;validate&#39; directory. Just run the following commands:</span></p><p class="c9"><span class="c8">cd validate<br>npm install<br>node validate.js<br></span></p><p class="c1"><span class="c0">For those who are using MongoHQ, MongoLab or want to run the webserver on a different host or port, there are some options to the validation script that can be exposed by running:</span></p><p class="c9"><span class="c8">node validate.js --help<br></span></p><p class="c10 c12"><span class="c0">If you got it right, it will provide a validation code for you to enter into the box below. Enter just the code, no spaces. Note that your blog must be running when you run the validator.</span></p><p class="c9 c13"><span class="c2">1</span></p><p class="c4"><span class="c15">A7foYWqTpKqRftI2d1D8</span></p><p class="c7 c10"><span class="c14"></span></p></body></html>