<html><head><title>Untitled document</title><meta content="text/html; charset=UTF-8" http-equiv="content-type"><style type="text/css">.lst-kix_x01sfa34pbuw-2>li:before{content:"\0025a0  "}ul.lst-kix_x01sfa34pbuw-0{list-style-type:none}.lst-kix_x01sfa34pbuw-8>li:before{content:"\0025a0  "}ul.lst-kix_x01sfa34pbuw-1{list-style-type:none}ul.lst-kix_x01sfa34pbuw-2{list-style-type:none}ul.lst-kix_x01sfa34pbuw-3{list-style-type:none}ul.lst-kix_x01sfa34pbuw-4{list-style-type:none}ul.lst-kix_x01sfa34pbuw-5{list-style-type:none}ul.lst-kix_x01sfa34pbuw-6{list-style-type:none}.lst-kix_x01sfa34pbuw-4>li:before{content:"\0025cb  "}.lst-kix_x01sfa34pbuw-6>li:before{content:"\0025cf  "}.lst-kix_x01sfa34pbuw-5>li:before{content:"\0025a0  "}.lst-kix_x01sfa34pbuw-7>li:before{content:"\0025cb  "}.lst-kix_x01sfa34pbuw-0>li:before{content:"\0025cf  "}ul.lst-kix_x01sfa34pbuw-8{list-style-type:none}.lst-kix_x01sfa34pbuw-1>li:before{content:"\0025cb  "}ul.lst-kix_x01sfa34pbuw-7{list-style-type:none}.lst-kix_x01sfa34pbuw-3>li:before{content:"\0025cf  "}ol{margin:0;padding:0}.c18{padding-left:0pt;line-height:1.3999999999999997;padding-top:12pt;direction:ltr;margin-left:36pt;padding-bottom:17pt}.c3{padding-left:0pt;line-height:1.3999999999999997;padding-top:12pt;direction:ltr;margin-left:36pt;padding-bottom:25pt}.c9{line-height:1.4;direction:ltr;margin-left:22pt;padding-bottom:8pt}.c2{line-height:1.5;padding-top:15pt;direction:ltr;padding-bottom:17pt}.c6{color:#615f5e;font-size:12pt;background-color:#ffffff;font-weight:bold}.c4{line-height:1.375;direction:ltr;padding-bottom:8pt}.c12{color:#aaaaaa;background-color:#f7f7f7;font-family:"Verdana"}.c17{max-width:468pt;background-color:#ffffff;padding:72pt 72pt 72pt 72pt}.c10{color:#6ba539;font-size:15pt;background-color:#ffffff}.c14{line-height:1.4;direction:ltr;padding-bottom:11pt}.c11{line-height:1.4;direction:ltr;padding-bottom:8pt}.c5{color:#615f5e;background-color:#f8f8f8;font-family:"Verdana"}.c7{color:#615f5e;font-size:12pt;background-color:#ffffff}.c8{line-height:1.5;direction:ltr;padding-bottom:17pt}.c15{color:#489b00;font-size:12pt;background-color:#ffffff}.c0{color:inherit;text-decoration:inherit}.c13{margin:0;padding:0}.c1{background-color:#ffffff;font-family:"Verdana"}.c16{font-weight:bold}.title{padding-top:0pt;line-height:1.15;text-align:left;color:#000000;font-size:21pt;font-family:"Trebuchet MS";padding-bottom:0pt}.subtitle{padding-top:0pt;line-height:1.15;text-align:left;color:#666666;font-style:italic;font-size:13pt;font-family:"Trebuchet MS";padding-bottom:10pt}li{color:#000000;font-size:11pt;font-family:"Arial"}p{color:#000000;font-size:11pt;margin:0;font-family:"Arial"}h1{padding-top:10pt;line-height:1.15;text-align:left;color:#000000;font-size:16pt;font-family:"Trebuchet MS";padding-bottom:0pt}h2{padding-top:10pt;line-height:1.15;text-align:left;color:#000000;font-size:13pt;font-family:"Trebuchet MS";font-weight:bold;padding-bottom:0pt}h3{padding-top:8pt;line-height:1.15;text-align:left;color:#666666;font-size:12pt;font-family:"Trebuchet MS";font-weight:bold;padding-bottom:0pt}h4{padding-top:8pt;line-height:1.15;text-align:left;color:#666666;font-size:11pt;text-decoration:underline;font-family:"Trebuchet MS";padding-bottom:0pt}h5{padding-top:8pt;line-height:1.15;text-align:left;color:#666666;font-size:11pt;font-family:"Trebuchet MS";padding-bottom:0pt}h6{padding-top:8pt;line-height:1.15;text-align:left;color:#666666;font-style:italic;font-size:11pt;font-family:"Trebuchet MS";padding-bottom:0pt}</style></head><body class="c17"><h2 class="c14"><a name="h.stdenw7egeq"></a><span class="c10">Homework: Homework 4.3</span></h2><p class="c4"><span class="c6">Making the Blog fast</span></p><p class="c8"><span class="c7">To get started, please download </span><span class="c15"><a class="c0" href="https://education.10gen.com/static/m101js-august-2013/handouts/hw4.2379f4fcf6db.tar">hw4.tar</a></span><span class="c7">&nbsp;or </span><span class="c15"><a class="c0" href="https://education.10gen.com/static/m101js-august-2013/handouts/hw4.7a28b44ef950.zip">hw4.zip</a></span><span class="c7">&nbsp;and unpack file to your computer. Files for this homework should be included with your homework handout. This assignment requires Mongo 2.2 or above.</span></p><p class="c2"><span class="c7">In this homework assignment you will be adding some indexes to the post collection to make the blog fast.</span></p><p class="c2"><span class="c7">We have provided the full code for the blog application and you don&#39;t need to make any changes, or even run the blog. But you can, for fun.</span></p><p class="c2"><span class="c7">We are also providing a patriotic (if you are an American) data set for the blog. There are 1000 entries with lots of comments and tags. You must load this dataset to complete the problem.</span></p><p class="c11"><span class="c5"># from the mongo shell<br>use blog<br>db.posts.drop()<br># from the a mac or PC terminal window<br>mongoimport -d blog -c posts &lt; posts.json<br></span></p><p class="c8"><span class="c7">The blog has been enhanced so that it can also display the top 10 most recent posts by tag. There are hyperlinks from the post tags to the page that displays the 10 most recent blog entries for that tag. (run the blog and it will be obvious)</span></p><p class="c2"><span class="c7">Your assignment is to make the following blog pages fast:</span></p><ul class="c13 lst-kix_x01sfa34pbuw-0 start"><li class="c3"><span class="c7">The blog home page</span></li><li class="c3"><span class="c7">The page that displays blog posts by tag (http://localhost:3000/tag/whatever)</span></li><li class="c18"><span class="c7">The page that displays a blog entry by permalink (http://localhost:3000/post/permalink)</span></li></ul><p class="c2"><span class="c7">By fast, we mean that indexes should be in place to satisfy these queries such that we only need to scan the number of documents we are going to return.</span></p><p class="c2"><span class="c7">To figure out what queries you need to optimize, you can read the code in posts.js and see what queries it is doing to return the data needed for the relevant pages. Isolate those queries and use explain to explore.</span></p><p class="c2"><span class="c7">Once you have added the indexes to make those pages fast, run the following commands to validate your project just like in previous homeworks.</span></p><p class="c11"><span class="c5">cd validate<br>npm install<br>node hw4-3_validate.js<br></span></p><p class="c4"><span class="c7">For those who are using MongoHQ or MongoLab, or just want to run MongoDB on a different host and port, there are some options to the validation script that can be exposed by running:</span></p><p class="c11"><span class="c5">node hw4-3_validate.js --help<br></span></p><p class="c8"><span class="c7">If you got it right, it will provide a validation code for you to enter into the box below. Enter just the code, no spaces.</span></p><p class="c2"><span class="c7">Note that your blog does NOT need to be running when you run the validator, but your database server does.</span></p><p class="c11"><span class="c12">Ans: </span></p><p class="c9"><span class="c1">dOiP6E1JDOYwDKWP0uN3</span></p></body></html>