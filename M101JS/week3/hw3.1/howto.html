<html><head><title>Untitled document</title><meta content="text/html; charset=UTF-8" http-equiv="content-type"><style type="text/css">ol{margin:0;padding:0}.c1{color:#615f5e;font-size:12pt;background-color:#ffffff}.c2{line-height:1.5;direction:ltr;padding-bottom:17pt}.c10{color:#615f5e;background-color:#f8f8f8;font-family:"Verdana"}.c4{max-width:468pt;background-color:#ffffff;padding:72pt 72pt 72pt 72pt}.c11{color:#6ba539;font-size:15pt;background-color:#ffffff}.c0{color:#489b00;font-size:12pt;background-color:#ffffff}.c6{color:inherit;text-decoration:inherit}.c5{line-height:1.4;direction:ltr}.c12{height:11pt}.c3{padding-top:15pt}.c8{line-height:1.375}.c9{padding-bottom:11pt}.c7{direction:ltr}.title{padding-top:0pt;line-height:1.15;text-align:left;color:#000000;font-size:21pt;font-family:"Trebuchet MS";padding-bottom:0pt}.subtitle{padding-top:0pt;line-height:1.15;text-align:left;color:#666666;font-style:italic;font-size:13pt;font-family:"Trebuchet MS";padding-bottom:10pt}li{color:#000000;font-size:11pt;font-family:"Arial"}p{color:#000000;font-size:11pt;margin:0;font-family:"Arial"}h1{padding-top:10pt;line-height:1.15;text-align:left;color:#000000;font-size:16pt;font-family:"Trebuchet MS";padding-bottom:0pt}h2{padding-top:10pt;line-height:1.15;text-align:left;color:#000000;font-size:13pt;font-family:"Trebuchet MS";font-weight:bold;padding-bottom:0pt}h3{padding-top:8pt;line-height:1.15;text-align:left;color:#666666;font-size:12pt;font-family:"Trebuchet MS";font-weight:bold;padding-bottom:0pt}h4{padding-top:8pt;line-height:1.15;text-align:left;color:#666666;font-size:11pt;text-decoration:underline;font-family:"Trebuchet MS";padding-bottom:0pt}h5{padding-top:8pt;line-height:1.15;text-align:left;color:#666666;font-size:11pt;font-family:"Trebuchet MS";padding-bottom:0pt}h6{padding-top:8pt;line-height:1.15;text-align:left;color:#666666;font-style:italic;font-size:11pt;font-family:"Trebuchet MS";padding-bottom:0pt}</style></head><body class="c4"><h2 class="c5 c9"><a name="h.fl02oeuk8ql0"></a><span class="c11">Homework: Homework 3.1</span></h2><p class="c8 c7"><span class="c1">To get started, please download </span><span class="c0"><a class="c6" href="https://education.10gen.com/static/m101js-august-2013/handouts/hw3.018f02367beb.zip">hw3.zip</a></span><span class="c1">&nbsp;or </span><span class="c0"><a class="c6" href="https://education.10gen.com/static/m101js-august-2013/handouts/hw3.31b52da899ec.tar">hw3.tar</a></span><span class="c1">&nbsp;and unpack file to your computer. You should have included with your homework files a &quot;students.json&quot; file. Import this file into your local Mongo instance with this command:</span></p><p class="c5"><span class="c10">$ mongoimport -d school -c students &lt; students.json<br></span></p><p class="c2"><span class="c1">Write a program in Node.js that will remove the lowest homework score for each student. Since there is a single document for each student containing an array of scores, you will need to update the scores array and remove the homework.</span></p><p class="c2 c3"><span class="c1">Hint: One way to solve this is to find the lowest homework in code and then update the scores array with the low homework removed. If you are struggling with the Node.js side of this, look at the </span><span class="c0"><a class="c6" href="http://tinyurl.com/k7q47bt">Array.splice</a></span><span class="c1">&nbsp;method, which can remove elements from a Javascript Array. Note that you should not use the </span><span class="c0"><a class="c6" href="http://tinyurl.com/kp3w6qo">delete operator</a></span><span class="c1">, because it will delete the element without resizing the array, leaving an empty space.</span></p><p class="c2 c3"><span class="c1">To confirm you are on the right track, here are some queries to run after you process the data with the correct answer shown: </span></p><p class="c2 c3 c12"><span class="c1"></span></p><p class="c2 c3"><span class="c1">Let us count the number of students we have:</span></p><p class="c5"><span class="c10">&gt; use school<br>&gt; db.students.count() <br>200<br></span></p><p class="c7 c8"><span class="c1">Let&#39;s see what Demarcus Audette&#39;s record looks like:</span></p><p class="c5"><span class="c10">&gt;db.students.find({_id:100}).pretty()<br>{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;_id&quot; : 100,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;name&quot; : &quot;Demarcus Audette&quot;,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;scores&quot; : [<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;type&quot; : &quot;exam&quot;,<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&quot;score&quot; : 47.42608580155614<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;type&quot; : &quot;quiz&quot;,<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&quot;score&quot; : 44.83416623719906<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;type&quot; : &quot;homework&quot;,<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&quot;score&quot; : 39.01726616178844<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;]<br>}<br><br></span></p><p class="c2"><span class="c1">To verify that you have completed this task correctly, provide the identify of the student with the highest average in the class with following query that uses the aggregation framework. The answer will appear in the _id field of the resulting document.</span></p><p class="c5"><span class="c10">&gt; db.students.aggregate({&#39;$unwind&#39;:&#39;$scores&#39;},{&#39;$group&#39;:{&#39;_id&#39;:&#39;$_id&#39;, &#39;average&#39;:{$avg:&#39;$scores.score&#39;}}}, {&#39;$sort&#39;:{&#39;average&#39;:-1}}, {&#39;$limit&#39;:1})<br></span></p><p class="c7"><span class="c1">Enter just the numeric value of the _id below.</span></p><br/><p>Ans: 13</p></body></html>
